<link rel="import" href="../polymer/polymer-element.html">
<link rel="import" href="../iron-icon/iron-icon.html">
<link rel="import" href="popperjs-import.html">

<dom-module id="genesis-popover">

  <template>

    <style>
      /* shadow DOM styles go here */

      .popper {
        position: absolute;
        background: rgba(200,200,200,1);
        padding: 15px 22px;
        border-radius: 10px;
        font-size: 20px;
        margin-top: 20px;
        max-width: var(--genesis-popover-max-width, 300px);
        z-index: 10;
      }

      .popper-visible {
        display: flex;
        /* visibility: visible;
        opacity: 1;
        transition: opacity 1s linear; */
      }

      .popper-hidden {
        display: none;
        /* visibility: hidden;
        opacity: 0;
        transition: visibility 0s 1s, opacity 1s linear; */
      }

      .popper::before {
        position: absolute;
        left: 50%;
        content: "";
        border-width: 14px 8px 0 8px;
        border-style: solid;
        border-color: rgba(200,200,200,1) transparent transparent transparent;
        top: -14px;
        transform: rotate(180deg);
        margin-left: -8px;
      }

    </style>

    <!-- shadow DOM goes here -->


       <span id="popoverEmitter" on-click="popper">
         <slot></slot>
       </span>

      <div id="popoverContent" class$="[[popperClass]]">
        <slot name="content">Default popover content</slot>
      </div>

  </template>

  <script>
    class GenesisPopover extends Polymer.Element {
      static get is() {
        return 'genesis-popover';
      }
      static get properties() {
        return {
          popperClass : {
            type: String,
            value: 'popper popper-hidden'
          },
          pressed: {
            type: Boolean,
            notify: true,
            reflectToAttribute: true,
            value: false
          }
        }
      }
      constructor() {
        super();
      }


      popper() {

        this.pressed = !this.pressed;

        if (this.pressed) {
            this.popperClass='popper popper-visible';
            var popperContent = this.$.popoverContent;
            var popperEmitter = this.$.popoverEmitter;
            var anotherPopper = new Popper(
                popperEmitter,
                popperContent,
                {
                    // popper options here
                }
            );
        } else {
          this.popperClass='popper popper-hidden';
        }
      }

    }
    customElements.define(GenesisPopover.is, GenesisPopover);
  </script>

</dom-module>
